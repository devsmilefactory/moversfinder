import React from 'react';\nimport { CreditCard, DollarSign, Shield, AlertTriangle } from 'lucide-react';\nimport { FormInput, FormSelect } from '../../shared/forms';\nimport Icon from '../../ui/AppIcon';\n\n/**\n * BankingStep Component\n * \n * Handles banking and payment information collection including:\n * - Bank account details for payments\n * - Mobile money information\n * - Payment preferences\n * - Security and verification\n */\nconst BankingStep = ({\n  formData = {},\n  errors = {},\n  onChange,\n  profileType = 'driver',\n  className = ''\n}) => {\n  const handleInputChange = (name, value) => {\n    onChange?.(name, value);\n  };\n\n  const BANKS = [\n    { value: 'cbz', label: 'CBZ Bank' },\n    { value: 'stanbic', label: 'Stanbic Bank' },\n    { value: 'standard_chartered', label: 'Standard Chartered' },\n    { value: 'fbc', label: 'FBC Bank' },\n    { value: 'nmb', label: 'NMB Bank' },\n    { value: 'steward', label: 'Steward Bank' },\n    { value: 'zb', label: 'ZB Bank' },\n    { value: 'nedbank', label: 'Nedbank' },\n    { value: 'ecobank', label: 'Ecobank' },\n    { value: 'other', label: 'Other Bank' }\n  ];\n\n  const ACCOUNT_TYPES = [\n    { value: 'savings', label: 'Savings Account' },\n    { value: 'current', label: 'Current Account' },\n    { value: 'business', label: 'Business Account' }\n  ];\n\n  const MOBILE_MONEY_PROVIDERS = [\n    { value: 'ecocash', label: 'EcoCash' },\n    { value: 'onemoney', label: 'OneMoney' },\n    { value: 'telecash', label: 'TeleCash' },\n    { value: 'mycash', label: 'MyCash' }\n  ];\n\n  const PAYMENT_PREFERENCES = [\n    { value: 'bank_transfer', label: 'Bank Transfer' },\n    { value: 'mobile_money', label: 'Mobile Money' },\n    { value: 'both', label: 'Both Options' }\n  ];\n\n  const validateAccountNumber = (accountNumber, bankName) => {\n    if (!accountNumber) return true;\n    \n    // Basic validation - most Zimbabwe banks use 10-13 digit account numbers\n    const cleanNumber = accountNumber.replace(/\\s/g, '');\n    if (!/^\\d{8,15}$/.test(cleanNumber)) {\n      return false;\n    }\n    \n    return true;\n  };\n\n  const formatAccountNumber = (value) => {\n    // Remove all non-digits\n    const digits = value.replace(/\\D/g, '');\n    \n    // Add spaces every 4 digits for readability\n    return digits.replace(/(\\d{4})(?=\\d)/g, '$1 ');\n  };\n\n  const handleAccountNumberChange = (value) => {\n    const formatted = formatAccountNumber(value);\n    handleInputChange('account_number', formatted);\n  };\n\n  return (\n    <div className={`space-y-6 ${className}`}>\n      {/* Header */}\n      <div className=\"text-center space-y-2\">\n        <div className=\"mx-auto w-12 h-12 bg-green-100 rounded-full flex items-center justify-center\">\n          <CreditCard className=\"w-6 h-6 text-green-600\" />\n        </div>\n        <h2 className=\"text-xl font-semibold text-gray-900\">\n          Banking Information\n        </h2>\n        <p className=\"text-sm text-gray-600\">\n          {profileType === 'driver' \n            ? 'Set up your payment details to receive earnings'\n            : 'Configure payment methods for your account'\n          }\n        </p>\n      </div>\n\n      {/* Payment Preference */}\n      <div className=\"space-y-4\">\n        <h3 className=\"text-lg font-medium text-gray-900 flex items-center gap-2\">\n          <DollarSign className=\"w-5 h-5\" />\n          Payment Preference\n        </h3>\n        \n        <FormSelect\n          label=\"Preferred Payment Method\"\n          name=\"payment_preference\"\n          value={formData.payment_preference || ''}\n          onChange={(value) => handleInputChange('payment_preference', value)}\n          options={PAYMENT_PREFERENCES}\n          error={errors.payment_preference}\n          required\n          placeholder=\"Select payment method\"\n        />\n      </div>\n\n      {/* Bank Account Details */}\n      {(formData.payment_preference === 'bank_transfer' || formData.payment_preference === 'both') && (\n        <div className=\"space-y-4\">\n          <h3 className=\"text-lg font-medium text-gray-900 flex items-center gap-2\">\n            <CreditCard className=\"w-5 h-5\" />\n            Bank Account Details\n          </h3>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <FormSelect\n              label=\"Bank Name\"\n              name=\"bank_name\"\n              value={formData.bank_name || ''}\n              onChange={(value) => handleInputChange('bank_name', value)}\n              options={BANKS}\n              error={errors.bank_name}\n              required\n              placeholder=\"Select your bank\"\n            />\n            \n            <FormSelect\n              label=\"Account Type\"\n              name=\"account_type\"\n              value={formData.account_type || ''}\n              onChange={(value) => handleInputChange('account_type', value)}\n              options={ACCOUNT_TYPES}\n              error={errors.account_type}\n              placeholder=\"Select account type\"\n            />\n          </div>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <FormInput\n              label=\"Account Number\"\n              name=\"account_number\"\n              value={formData.account_number || ''}\n              onChange={handleAccountNumberChange}\n              error={errors.account_number}\n              required\n              placeholder=\"1234 5678 9012\"\n              maxLength=\"19\" // 15 digits + 4 spaces\n            />\n            \n            <FormInput\n              label=\"Account Holder Name\"\n              name=\"account_holder_name\"\n              value={formData.account_holder_name || ''}\n              onChange={(value) => handleInputChange('account_holder_name', value)}\n              error={errors.account_holder_name}\n              required\n              placeholder=\"John Doe\"\n            />\n          </div>\n          \n          <FormInput\n            label=\"Branch Name/Code\"\n            name=\"branch_name\"\n            value={formData.branch_name || ''}\n            onChange={(value) => handleInputChange('branch_name', value)}\n            error={errors.branch_name}\n            placeholder=\"Harare Main Branch\"\n          />\n          \n          {/* Account Validation Warning */}\n          {formData.account_number && !validateAccountNumber(formData.account_number, formData.bank_name) && (\n            <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-3\">\n              <div className=\"flex items-start gap-2\">\n                <AlertTriangle className=\"w-4 h-4 text-yellow-600 flex-shrink-0 mt-0.5\" />\n                <p className=\"text-sm text-yellow-700\">\n                  Please verify your account number. Most Zimbabwe bank accounts are 8-15 digits long.\n                </p>\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Mobile Money Details */}\n      {(formData.payment_preference === 'mobile_money' || formData.payment_preference === 'both') && (\n        <div className=\"space-y-4\">\n          <h3 className=\"text-lg font-medium text-gray-900 flex items-center gap-2\">\n            <Icon name=\"Smartphone\" className=\"w-5 h-5\" />\n            Mobile Money Details\n          </h3>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <FormSelect\n              label=\"Mobile Money Provider\"\n              name=\"mobile_money_provider\"\n              value={formData.mobile_money_provider || ''}\n              onChange={(value) => handleInputChange('mobile_money_provider', value)}\n              options={MOBILE_MONEY_PROVIDERS}\n              error={errors.mobile_money_provider}\n              required\n              placeholder=\"Select provider\"\n            />\n            \n            <FormInput\n              label=\"Mobile Money Number\"\n              name=\"mobile_money_number\"\n              type=\"tel\"\n              value={formData.mobile_money_number || ''}\n              onChange={(value) => handleInputChange('mobile_money_number', value)}\n              error={errors.mobile_money_number}\n              required\n              placeholder=\"0771234567\"\n            />\n          </div>\n          \n          <FormInput\n            label=\"Account Holder Name\"\n            name=\"mobile_money_name\"\n            value={formData.mobile_money_name || ''}\n            onChange={(value) => handleInputChange('mobile_money_name', value)}\n            error={errors.mobile_money_name}\n            required\n            placeholder=\"John Doe\"\n          />\n        </div>\n      )}\n\n      {/* Corporate-specific fields */}\n      {profileType === 'corporate' && (\n        <div className=\"space-y-4\">\n          <h3 className=\"text-lg font-medium text-gray-900 flex items-center gap-2\">\n            <Icon name=\"Building\" className=\"w-5 h-5\" />\n            Corporate Banking\n          </h3>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <FormInput\n              label=\"Company Tax Number\"\n              name=\"company_tax_number\"\n              value={formData.company_tax_number || ''}\n              onChange={(value) => handleInputChange('company_tax_number', value)}\n              error={errors.company_tax_number}\n              placeholder=\"12345678\"\n            />\n            \n            <FormInput\n              label=\"VAT Registration Number\"\n              name=\"vat_number\"\n              value={formData.vat_number || ''}\n              onChange={(value) => handleInputChange('vat_number', value)}\n              error={errors.vat_number}\n              placeholder=\"VAT123456789\"\n            />\n          </div>\n        </div>\n      )}\n\n      {/* Payment Schedule (Driver only) */}\n      {profileType === 'driver' && (\n        <div className=\"space-y-4\">\n          <h3 className=\"text-lg font-medium text-gray-900 flex items-center gap-2\">\n            <Icon name=\"Calendar\" className=\"w-5 h-5\" />\n            Payment Schedule\n          </h3>\n          \n          <div className=\"bg-gray-50 rounded-lg p-4\">\n            <div className=\"space-y-3\">\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-sm font-medium text-gray-700\">Payment Frequency:</span>\n                <span className=\"text-sm text-gray-600\">Weekly (Every Friday)</span>\n              </div>\n              \n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-sm font-medium text-gray-700\">Minimum Payout:</span>\n                <span className=\"text-sm text-gray-600\">$10 USD</span>\n              </div>\n              \n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-sm font-medium text-gray-700\">Processing Time:</span>\n                <span className=\"text-sm text-gray-600\">1-2 business days</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Security Information */}\n      <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\n        <div className=\"flex items-start gap-3\">\n          <Shield className=\"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5\" />\n          <div>\n            <p className=\"text-sm font-medium text-green-900\">\n              Banking Security\n            </p>\n            <ul className=\"text-sm text-green-700 mt-1 space-y-1\">\n              <li>• All banking information is encrypted and stored securely</li>\n              <li>• We never store your banking passwords or PINs</li>\n              <li>• Account details are only used for payment processing</li>\n              <li>• You can update your banking information anytime</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n\n      {/* Important Notice */}\n      <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n        <div className=\"flex items-start gap-3\">\n          <Icon name=\"Info\" className=\"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5\" />\n          <div>\n            <p className=\"text-sm font-medium text-blue-900\">\n              Important Notice\n            </p>\n            <p className=\"text-sm text-blue-700 mt-1\">\n              {profileType === 'driver' \n                ? 'Ensure your banking details are accurate to avoid payment delays. You can update these details later in your profile settings.'\n                : 'Verify your payment information is correct for smooth transaction processing. Contact support if you need assistance with payment setup.'\n              }\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default BankingStep;"