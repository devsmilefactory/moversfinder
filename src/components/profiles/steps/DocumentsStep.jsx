import React from 'react';\nimport { FileText, Upload, CheckCircle, AlertCircle, Shield } from 'lucide-react';\nimport Icon from '../../ui/AppIcon';\nimport Button from '../../ui/Button';\n\n/**\n * DocumentsStep Component\n * \n * Handles document upload for profile completion including:\n * - Vehicle registration and insurance\n * - Roadworthy certificate\n * - Identity documents\n * - Professional certificates\n * - Document validation and preview\n */\nconst DocumentsStep = ({\n  formData = {},\n  errors = {},\n  onFileChange,\n  profileType = 'driver',\n  className = ''\n}) => {\n  const handleFileUpload = (name, file) => {\n    onFileChange?.(name, file);\n  };\n\n  const getRequiredDocuments = () => {\n    const baseDocuments = [\n      {\n        key: 'identity_document',\n        label: 'Identity Document',\n        description: 'National ID or Passport',\n        required: true,\n        icon: 'CreditCard'\n      }\n    ];\n\n    if (profileType === 'driver') {\n      return [\n        ...baseDocuments,\n        {\n          key: 'license_document',\n          label: \"Driver's License\",\n          description: 'Valid driver\\'s license (front and back)',\n          required: true,\n          icon: 'CreditCard'\n        },\n        {\n          key: 'vehicle_registration',\n          label: 'Vehicle Registration',\n          description: 'Current vehicle registration certificate',\n          required: true,\n          icon: 'FileText'\n        },\n        {\n          key: 'insurance_certificate',\n          label: 'Insurance Certificate',\n          description: 'Valid vehicle insurance certificate',\n          required: true,\n          icon: 'Shield'\n        },\n        {\n          key: 'roadworthy_certificate',\n          label: 'Roadworthy Certificate',\n          description: 'Current roadworthy/fitness certificate',\n          required: true,\n          icon: 'CheckCircle'\n        },\n        {\n          key: 'psvl_certificate',\n          label: 'PSVL Certificate',\n          description: 'Public Service Vehicle License (if applicable)',\n          required: false,\n          icon: 'FileText'\n        }\n      ];\n    }\n\n    if (profileType === 'corporate') {\n      return [\n        ...baseDocuments,\n        {\n          key: 'business_registration',\n          label: 'Business Registration',\n          description: 'Company registration certificate',\n          required: true,\n          icon: 'FileText'\n        },\n        {\n          key: 'tax_certificate',\n          label: 'Tax Certificate',\n          description: 'Tax clearance certificate',\n          required: true,\n          icon: 'FileText'\n        },\n        {\n          key: 'bank_statement',\n          label: 'Bank Statement',\n          description: 'Recent bank statement (last 3 months)',\n          required: false,\n          icon: 'FileText'\n        }\n      ];\n    }\n\n    return baseDocuments;\n  };\n\n  const requiredDocuments = getRequiredDocuments();\n\n  const getDocumentStatus = (docKey) => {\n    const file = formData[docKey];\n    const error = errors[docKey];\n    \n    if (error) return 'error';\n    if (file) return 'uploaded';\n    return 'pending';\n  };\n\n  const getStatusIcon = (status) => {\n    switch (status) {\n      case 'uploaded':\n        return <CheckCircle className=\"w-5 h-5 text-green-600\" />;\n      case 'error':\n        return <AlertCircle className=\"w-5 h-5 text-red-600\" />;\n      default:\n        return <Upload className=\"w-5 h-5 text-gray-400\" />;\n    }\n  };\n\n  const getStatusColor = (status) => {\n    switch (status) {\n      case 'uploaded':\n        return 'border-green-300 bg-green-50';\n      case 'error':\n        return 'border-red-300 bg-red-50';\n      default:\n        return 'border-gray-300 bg-white';\n    }\n  };\n\n  const DocumentUploadCard = ({ document }) => {\n    const status = getDocumentStatus(document.key);\n    const file = formData[document.key];\n    const error = errors[document.key];\n\n    return (\n      <div className={`border-2 border-dashed rounded-lg p-4 transition-colors ${getStatusColor(status)}`}>\n        <div className=\"flex items-start gap-3\">\n          <div className=\"flex-shrink-0\">\n            {getStatusIcon(status)}\n          </div>\n          \n          <div className=\"flex-1 min-w-0\">\n            <div className=\"flex items-center gap-2 mb-1\">\n              <h4 className=\"text-sm font-medium text-gray-900\">\n                {document.label}\n              </h4>\n              {document.required && (\n                <span className=\"text-xs text-red-600\">*</span>\n              )}\n            </div>\n            \n            <p className=\"text-xs text-gray-600 mb-3\">\n              {document.description}\n            </p>\n            \n            {status === 'uploaded' && file && (\n              <div className=\"mb-3\">\n                <div className=\"flex items-center gap-2 text-xs text-green-700\">\n                  <CheckCircle className=\"w-3 h-3\" />\n                  <span className=\"truncate\">{file.name}</span>\n                </div>\n                <div className=\"text-xs text-gray-500 mt-1\">\n                  {(file.size / 1024 / 1024).toFixed(2)} MB\n                </div>\n              </div>\n            )}\n            \n            {error && (\n              <div className=\"mb-3 text-xs text-red-600\">\n                {error}\n              </div>\n            )}\n            \n            <label className=\"cursor-pointer\">\n              <input\n                type=\"file\"\n                className=\"sr-only\"\n                accept=\"image/*,.pdf\"\n                onChange={(e) => handleFileUpload(document.key, e.target.files[0])}\n              />\n              <Button\n                variant={status === 'uploaded' ? 'outline' : 'primary'}\n                size=\"sm\"\n                className=\"w-full\"\n              >\n                <Upload className=\"w-3 h-3 mr-1\" />\n                {status === 'uploaded' ? 'Replace File' : 'Upload File'}\n              </Button>\n            </label>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  const calculateProgress = () => {\n    const requiredDocs = requiredDocuments.filter(doc => doc.required);\n    const uploadedDocs = requiredDocs.filter(doc => formData[doc.key]);\n    return requiredDocs.length > 0 ? Math.round((uploadedDocs.length / requiredDocs.length) * 100) : 0;\n  };\n\n  const progress = calculateProgress();\n\n  return (\n    <div className={`space-y-6 ${className}`}>\n      {/* Header */}\n      <div className=\"text-center space-y-2\">\n        <div className=\"mx-auto w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center\">\n          <FileText className=\"w-6 h-6 text-orange-600\" />\n        </div>\n        <h2 className=\"text-xl font-semibold text-gray-900\">\n          Document Upload\n        </h2>\n        <p className=\"text-sm text-gray-600\">\n          Upload required documents for verification\n        </p>\n      </div>\n\n      {/* Progress Indicator */}\n      <div className=\"bg-gray-50 rounded-lg p-4\">\n        <div className=\"flex items-center justify-between mb-2\">\n          <span className=\"text-sm font-medium text-gray-700\">\n            Upload Progress\n          </span>\n          <span className=\"text-sm text-gray-600\">\n            {progress}% Complete\n          </span>\n        </div>\n        <div className=\"w-full bg-gray-200 rounded-full h-2\">\n          <div\n            className=\"bg-blue-600 h-2 rounded-full transition-all duration-300\"\n            style={{ width: `${progress}%` }}\n          />\n        </div>\n      </div>\n\n      {/* Required Documents */}\n      <div className=\"space-y-4\">\n        <h3 className=\"text-lg font-medium text-gray-900 flex items-center gap-2\">\n          <FileText className=\"w-5 h-5\" />\n          Required Documents\n        </h3>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          {requiredDocuments\n            .filter(doc => doc.required)\n            .map(document => (\n              <DocumentUploadCard key={document.key} document={document} />\n            ))\n          }\n        </div>\n      </div>\n\n      {/* Optional Documents */}\n      {requiredDocuments.some(doc => !doc.required) && (\n        <div className=\"space-y-4\">\n          <h3 className=\"text-lg font-medium text-gray-900 flex items-center gap-2\">\n            <Icon name=\"Plus\" className=\"w-5 h-5\" />\n            Optional Documents\n          </h3>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            {requiredDocuments\n              .filter(doc => !doc.required)\n              .map(document => (\n                <DocumentUploadCard key={document.key} document={document} />\n              ))\n            }\n          </div>\n        </div>\n      )}\n\n      {/* Document Guidelines */}\n      <div className=\"space-y-4\">\n        <h3 className=\"text-lg font-medium text-gray-900 flex items-center gap-2\">\n          <Icon name=\"Info\" className=\"w-5 h-5\" />\n          Document Guidelines\n        </h3>\n        \n        <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n          <div className=\"space-y-3\">\n            <div>\n              <h4 className=\"text-sm font-medium text-blue-900 mb-2\">File Requirements:</h4>\n              <ul className=\"text-sm text-blue-700 space-y-1\">\n                <li>• Accepted formats: JPG, PNG, PDF</li>\n                <li>• Maximum file size: 5MB per document</li>\n                <li>• Images should be clear and well-lit</li>\n                <li>• All text must be clearly readable</li>\n              </ul>\n            </div>\n            \n            <div>\n              <h4 className=\"text-sm font-medium text-blue-900 mb-2\">Document Quality:</h4>\n              <ul className=\"text-sm text-blue-700 space-y-1\">\n                <li>• Documents must be current and valid</li>\n                <li>• No expired certificates accepted</li>\n                <li>• Ensure all corners and edges are visible</li>\n                <li>• Avoid shadows or glare on documents</li>\n              </ul>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Security Notice */}\n      <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\n        <div className=\"flex items-start gap-3\">\n          <Shield className=\"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5\" />\n          <div>\n            <p className=\"text-sm font-medium text-green-900\">\n              Document Security\n            </p>\n            <p className=\"text-sm text-green-700 mt-1\">\n              All documents are encrypted and stored securely. We use bank-level security to protect your personal information and only share documents with authorized verification partners.\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {/* Verification Timeline */}\n      <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\n        <div className=\"flex items-start gap-3\">\n          <Icon name=\"Clock\" className=\"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5\" />\n          <div>\n            <p className=\"text-sm font-medium text-yellow-900\">\n              Verification Process\n            </p>\n            <p className=\"text-sm text-yellow-700 mt-1\">\n              Document verification typically takes 24-48 hours. You'll receive an email notification once your documents have been reviewed. Incomplete or unclear documents may require resubmission.\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default DocumentsStep;"