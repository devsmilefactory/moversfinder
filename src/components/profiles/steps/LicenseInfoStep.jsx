import React from 'react';\nimport { CreditCard, Calendar, FileText, AlertTriangle } from 'lucide-react';\nimport { FormInput, FormSelect } from '../../shared/forms';\nimport Icon from '../../ui/AppIcon';\n\n/**\n * LicenseInfoStep Component\n * \n * Handles driver's license information collection including:\n * - License number and expiry date\n * - License class and endorsements\n * - License document upload\n * - Validation and verification status\n */\nconst LicenseInfoStep = ({\n  formData = {},\n  errors = {},\n  onChange,\n  onFileChange,\n  className = ''\n}) => {\n  const handleInputChange = (name, value) => {\n    onChange?.(name, value);\n  };\n\n  const handleFileUpload = (name, file) => {\n    onFileChange?.(name, file);\n  };\n\n  const LICENSE_CLASSES = [\n    { value: 'class_1', label: 'Class 1 - Motorcycles' },\n    { value: 'class_2', label: 'Class 2 - Light Vehicles' },\n    { value: 'class_3', label: 'Class 3 - Heavy Vehicles' },\n    { value: 'class_4', label: 'Class 4 - Public Service Vehicles' },\n  ];\n\n  const ENDORSEMENTS = [\n    { value: 'none', label: 'No Endorsements' },\n    { value: 'dangerous_goods', label: 'Dangerous Goods' },\n    { value: 'passenger_transport', label: 'Passenger Transport' },\n    { value: 'heavy_vehicle', label: 'Heavy Vehicle' },\n    { value: 'motorcycle', label: 'Motorcycle' },\n  ];\n\n  // Check if license is expiring soon (within 30 days)\n  const isLicenseExpiringSoon = () => {\n    if (!formData.license_expiry) return false;\n    const expiryDate = new Date(formData.license_expiry);\n    const thirtyDaysFromNow = new Date();\n    thirtyDaysFromNow.setDate(thirtyDaysFromNow.getDate() + 30);\n    return expiryDate <= thirtyDaysFromNow;\n  };\n\n  // Check if license is expired\n  const isLicenseExpired = () => {\n    if (!formData.license_expiry) return false;\n    const expiryDate = new Date(formData.license_expiry);\n    const today = new Date();\n    return expiryDate < today;\n  };\n\n  return (\n    <div className={`space-y-6 ${className}`}>\n      {/* Header */}\n      <div className=\"text-center space-y-2\">\n        <div className=\"mx-auto w-12 h-12 bg-green-100 rounded-full flex items-center justify-center\">\n          <CreditCard className=\"w-6 h-6 text-green-600\" />\n        </div>\n        <h2 className=\"text-xl font-semibold text-gray-900\">\n          Driver's License Information\n        </h2>\n        <p className=\"text-sm text-gray-600\">\n          Provide your valid driver's license details for verification\n        </p>\n      </div>\n\n      {/* License Details */}\n      <div className=\"space-y-4\">\n        <h3 className=\"text-lg font-medium text-gray-900 flex items-center gap-2\">\n          <CreditCard className=\"w-5 h-5\" />\n          License Details\n        </h3>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <FormInput\n            label=\"License Number\"\n            name=\"license_number\"\n            value={formData.license_number || ''}\n            onChange={(value) => handleInputChange('license_number', value)}\n            error={errors.license_number}\n            required\n            placeholder=\"DL123456789\"\n            className=\"uppercase\"\n          />\n          \n          <FormInput\n            label=\"License Expiry Date\"\n            name=\"license_expiry\"\n            type=\"date\"\n            value={formData.license_expiry || ''}\n            onChange={(value) => handleInputChange('license_expiry', value)}\n            error={errors.license_expiry}\n            required\n            min={new Date().toISOString().split('T')[0]} // Today or later\n          />\n        </div>\n\n        {/* License Status Warnings */}\n        {formData.license_expiry && (\n          <>\n            {isLicenseExpired() && (\n              <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n                <div className=\"flex items-start gap-3\">\n                  <AlertTriangle className=\"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5\" />\n                  <div>\n                    <p className=\"text-sm font-medium text-red-900\">\n                      License Expired\n                    </p>\n                    <p className=\"text-sm text-red-700 mt-1\">\n                      Your license has expired. You must renew it before you can drive for TaxiCab.\n                    </p>\n                  </div>\n                </div>\n              </div>\n            )}\n            \n            {!isLicenseExpired() && isLicenseExpiringSoon() && (\n              <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\n                <div className=\"flex items-start gap-3\">\n                  <AlertTriangle className=\"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5\" />\n                  <div>\n                    <p className=\"text-sm font-medium text-yellow-900\">\n                      License Expiring Soon\n                    </p>\n                    <p className=\"text-sm text-yellow-700 mt-1\">\n                      Your license expires within 30 days. Consider renewing it soon to avoid service interruption.\n                    </p>\n                  </div>\n                </div>\n              </div>\n            )}\n          </>\n        )}\n      </div>\n\n      {/* License Classification */}\n      <div className=\"space-y-4\">\n        <h3 className=\"text-lg font-medium text-gray-900 flex items-center gap-2\">\n          <FileText className=\"w-5 h-5\" />\n          License Classification\n        </h3>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <FormSelect\n            label=\"License Class\"\n            name=\"license_class\"\n            value={formData.license_class || ''}\n            onChange={(value) => handleInputChange('license_class', value)}\n            options={LICENSE_CLASSES}\n            error={errors.license_class}\n            required\n            placeholder=\"Select license class\"\n          />\n          \n          <FormSelect\n            label=\"Endorsements\"\n            name=\"license_endorsements\"\n            value={formData.license_endorsements || 'none'}\n            onChange={(value) => handleInputChange('license_endorsements', value)}\n            options={ENDORSEMENTS}\n            error={errors.license_endorsements}\n            placeholder=\"Select endorsements\"\n          />\n        </div>\n      </div>\n\n      {/* Additional License Information */}\n      <div className=\"space-y-4\">\n        <h3 className=\"text-lg font-medium text-gray-900 flex items-center gap-2\">\n          <Calendar className=\"w-5 h-5\" />\n          Additional Information\n        </h3>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <FormInput\n            label=\"License Issue Date\"\n            name=\"license_issue_date\"\n            type=\"date\"\n            value={formData.license_issue_date || ''}\n            onChange={(value) => handleInputChange('license_issue_date', value)}\n            error={errors.license_issue_date}\n            max={new Date().toISOString().split('T')[0]} // Today or earlier\n          />\n          \n          <FormInput\n            label=\"Issuing Authority\"\n            name=\"license_issuing_authority\"\n            value={formData.license_issuing_authority || 'VID Zimbabwe'}\n            onChange={(value) => handleInputChange('license_issuing_authority', value)}\n            error={errors.license_issuing_authority}\n            placeholder=\"VID Zimbabwe\"\n          />\n        </div>\n      </div>\n\n      {/* License Document Upload */}\n      <div className=\"space-y-4\">\n        <h3 className=\"text-lg font-medium text-gray-900 flex items-center gap-2\">\n          <Icon name=\"Upload\" className=\"w-5 h-5\" />\n          License Document\n        </h3>\n        \n        <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-6\">\n          <div className=\"text-center\">\n            <Icon name=\"FileText\" className=\"mx-auto h-12 w-12 text-gray-400\" />\n            <div className=\"mt-4\">\n              <label className=\"cursor-pointer\">\n                <span className=\"mt-2 block text-sm font-medium text-gray-900\">\n                  Upload License Document\n                </span>\n                <span className=\"mt-1 block text-sm text-gray-500\">\n                  Clear photo or scan of your driver's license (front and back)\n                </span>\n                <input\n                  type=\"file\"\n                  className=\"sr-only\"\n                  accept=\"image/*,.pdf\"\n                  onChange={(e) => handleFileUpload('license_document', e.target.files[0])}\n                />\n                <span className=\"mt-4 inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50\">\n                  <Icon name=\"Upload\" className=\"w-4 h-4 mr-2\" />\n                  Choose File\n                </span>\n              </label>\n            </div>\n            \n            {formData.license_document && (\n              <div className=\"mt-4 text-sm text-green-600\">\n                <Icon name=\"CheckCircle\" className=\"w-4 h-4 inline mr-1\" />\n                File selected: {formData.license_document.name}\n              </div>\n            )}\n            \n            {errors.license_document && (\n              <div className=\"mt-2 text-sm text-red-600\">\n                {errors.license_document}\n              </div>\n            )}\n          </div>\n        </div>\n        \n        <div className=\"text-xs text-gray-500\">\n          <p>• Accepted formats: JPG, PNG, PDF</p>\n          <p>• Maximum file size: 5MB</p>\n          <p>• Ensure all text is clearly visible</p>\n        </div>\n      </div>\n\n      {/* Requirements Info */}\n      <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n        <div className=\"flex items-start gap-3\">\n          <Icon name=\"Info\" className=\"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5\" />\n          <div>\n            <p className=\"text-sm font-medium text-blue-900\">\n              License Requirements\n            </p>\n            <ul className=\"text-sm text-blue-700 mt-1 space-y-1\">\n              <li>• Must be a valid Zimbabwe driver's license</li>\n              <li>• Class 2 or higher required for passenger transport</li>\n              <li>• License must not be expired or suspended</li>\n              <li>• Clear driving record preferred</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default LicenseInfoStep;"